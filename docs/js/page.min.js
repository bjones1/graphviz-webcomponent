!function(){"use strict";let e,t,n,a,i,d;let o=document.getElementById("source"),r=document.getElementById("graph"),c=document.getElementById("save-svg"),l=document.getElementById("save-png"),m=document.getElementById("save-script"),s=/<svg width="(\d+)pt" height="(\d+)pt"/;async function u({detail:a}){i=!1,n=void 0,e=a,c.disabled=!1;try{t=await new Promise((t,n)=>{let a=s.exec(e);if(!a)throw Error("Unknown SVG size.");let i=document.createElement("canvas");i.width=a[1]/.75,i.height=a[2]/.75;let d=i.getContext("2d"),o=document.createElement("img");o.onload=()=>{try{d.drawImage(o,0,0),i.toBlob(t)}catch(e){n(e)}},o.onerror=()=>n(Error("PNG conversion failed.")),o.src=`data:image/svg+xml;base64,${btoa(e)}`}),l.disabled=!1}catch({message:d}){alert(d)}}function g(){e=t=i=n=void 0,c.disabled=l.disabled=!0}function v(e){let t=document.createElement("a"),n=e.type;t.download="image/png"===n?"graph.png":"image/svg+xml"===n?"graph.svg":"graph.dot",document.body.appendChild(t);let a=URL.createObjectURL(e);t.href=a,t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)}function h(){clearTimeout(d),d=void 0,a||i||!n||(r.graph=o.value)}async function p(){if(i)return y();clearTimeout(a),a=void 0,i=!0,n=void 0;let e=o.value;if(e)try{await r.tryGraph(e)}catch(t){i=!1,n=t,d&&clearTimeout(d),d=setTimeout(h,300)}else r.graph=e,g()}function y(){a&&clearTimeout(a),a=setTimeout(p,300)}r.setAttribute("graph",o.getAttribute("value")),o.addEventListener("input",y),r.addEventListener("render",u),r.addEventListener("error",g),c.addEventListener("click",function(){v(new Blob([e],{type:"image/svg+xml"}))}),l.addEventListener("click",function(){v(t)}),m.addEventListener("click",function(){v(new Blob([r.graph],{type:"text/plain"}))})}();
//# sourceMappingURL=page.min.js.map
